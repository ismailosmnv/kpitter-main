{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getPosts,createPost,likePost}from'../api';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostList(){const[posts,setPosts]=useState([]);const[text,setText]=useState('');useEffect(()=>{fetchPosts();},[]);async function fetchPosts(){try{const data=await getPosts();setPosts(data);}catch(err){console.error(err);}}async function handleCreate(){if(!text.trim())return;try{await createPost(text);setText('');fetchPosts();}catch(err){console.error(err);}}async function handleLike(id){try{await likePost(id);fetchPosts();}catch(err){console.error(err);}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Global Feed\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's new?\",value:text,onChange:e=>setText(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreate,children:\"Post\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15px'},children:posts.map(p=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',margin:'5px',padding:'5px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(p.author.username),children:p.author.username})}),\":\",/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(p.id),style:{marginLeft:'5px'},children:p.text})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Likes: \",p.likesCount]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLike(p.id),children:\"Like\"})]},p.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","getPosts","createPost","likePost","Link","jsx","_jsx","jsxs","_jsxs","PostList","posts","setPosts","text","setText","fetchPosts","data","err","console","error","handleCreate","trim","handleLike","id","children","placeholder","value","onChange","e","target","onClick","style","marginTop","map","p","border","margin","padding","to","concat","author","username","marginLeft","likesCount"],"sources":["/Users/ismailosmanov/Downloads/kpitter-main/frontend/src/components/PostList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getPosts, createPost, likePost } from '../api';\nimport { Link } from 'react-router-dom';\n\nexport default function PostList() {\n  const [posts, setPosts] = useState([]);\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  async function fetchPosts() {\n    try {\n      const data = await getPosts();\n      setPosts(data);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async function handleCreate() {\n    if (!text.trim()) return;\n    try {\n      await createPost(text);\n      setText('');\n      fetchPosts();\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async function handleLike(id) {\n    try {\n      await likePost(id);\n      fetchPosts();\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  return (\n    <div>\n      <h2>Global Feed</h2>\n      <div>\n        <input\n          placeholder=\"What's new?\"\n          value={text}\n          onChange={e=>setText(e.target.value)}\n        />\n        <button onClick={handleCreate}>Post</button>\n      </div>\n      <div style={{ marginTop: '15px' }}>\n        {posts.map(p => (\n          <div key={p.id} style={{ border: '1px solid #ccc', margin: '5px', padding: '5px' }}>\n            <p>\n              <b>\n                <Link to={`/user/${p.author.username}`}>\n                  {p.author.username}\n                </Link>\n              </b>:\n              <Link to={`/post/${p.id}`} style={{ marginLeft: '5px' }}>\n                {p.text}\n              </Link>\n            </p>\n            <p>Likes: {p.likesCount}</p>\n            <button onClick={() => handleLike(p.id)}>Like</button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}