{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,Link,useNavigate}from'react-router-dom';import LoginForm from'./components/LoginForm';import RegisterForm from'./components/RegisterForm';import PostList from'./components/PostList';import PostDetail from'./components/PostDetail';import UserPage from'./pages/UserPage';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const navigate=useNavigate();const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{checkAuth();},[]);function checkAuth(){const username=localStorage.getItem('kpitter_username');const password=localStorage.getItem('kpitter_password');setIsLoggedIn(!!(username&&password));}function handleLogin(){checkAuth();navigate('/');// Переходимо на головну\n}function handleLogout(){localStorage.removeItem('kpitter_username');localStorage.removeItem('kpitter_password');setIsLoggedIn(false);navigate('/');}return/*#__PURE__*/_jsxs(\"div\",{style:{margin:'20px'},children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"nav\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),\" |\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"}),\" |\",\" \",isLoggedIn?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PostList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/post/:postId\",element:/*#__PURE__*/_jsx(PostDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user/:username\",element:/*#__PURE__*/_jsx(UserPage,{})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Link","useNavigate","LoginForm","RegisterForm","PostList","PostDetail","UserPage","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","navigate","isLoggedIn","setIsLoggedIn","checkAuth","username","localStorage","getItem","password","handleLogin","handleLogout","removeItem","style","margin","children","marginBottom","to","onClick","path","element","onLogin"],"sources":["/Users/ismailosmanov/Downloads/kpitter-main/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, Link, useNavigate } from 'react-router-dom';\n\nimport LoginForm from './components/LoginForm';\nimport RegisterForm from './components/RegisterForm';\nimport PostList from './components/PostList';\nimport PostDetail from './components/PostDetail';\nimport UserPage from './pages/UserPage';\n\nfunction App() {\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  function checkAuth() {\n    const username = localStorage.getItem('kpitter_username');\n    const password = localStorage.getItem('kpitter_password');\n    setIsLoggedIn(!!(username && password));\n  }\n\n  function handleLogin() {\n    checkAuth();\n    navigate('/'); // Переходимо на головну\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('kpitter_username');\n    localStorage.removeItem('kpitter_password');\n    setIsLoggedIn(false);\n    navigate('/');\n  }\n\n  return (\n    <div style={{ margin: '20px' }}>\n      <header>\n        <nav style={{ marginBottom: '10px' }}>\n          <Link to=\"/\">Home</Link> |{\" \"}\n          <Link to=\"/register\">Register</Link> |{\" \"}\n          {isLoggedIn ? (\n            <>\n              <button onClick={handleLogout}>Logout</button>\n            </>\n          ) : (\n            <Link to=\"/login\">Login</Link>\n          )}\n        </nav>\n      </header>\n\n      <Routes>\n        <Route path=\"/\" element={<PostList />} />\n        <Route path=\"/login\" element={<LoginForm onLogin={handleLogin} />} />\n        <Route path=\"/register\" element={<RegisterForm />} />\n        <Route path=\"/post/:postId\" element={<PostDetail />} />\n        <Route path=\"/user/:username\" element={<UserPage />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}